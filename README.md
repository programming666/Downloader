# 🚀 Qt6下载器

> 警告：本项目代码质量评级为 **"有伤风化"** 
> 
> 屎气指数：31.85/100 - 有点臭味，但还不至于熏死人

## 🎯 项目简介

这是一个用Qt6编写的下载器项目，虽然代码质量不怎么样，但功能还算齐全。它支持：

- ✅ 多线程下载（虽然线程管理有点混乱）
- ✅ 断点续传（偶尔会出现点小问题）
- ✅ HTTP/HTTPS协议支持
- ✅ 系统托盘集成（图标有时候加载失败）
- ✅ 主题切换（深色/浅色，看心情）
- ✅ 下载历史记录

## 🏗️ 代码结构

```
Downloader/
├── main.cpp                    # 程序入口，代码还算简洁
├── mainwindow.cpp/.h           # 主窗口，逻辑有点复杂（屎山核心）
├── downloadmanager.cpp/.h      # 下载管理器，线程池用得还行
├── downloadtask.cpp/.h         # 下载任务，状态管理有点混乱
├── httpworker.cpp/.h          # HTTP工作线程，注释写得不错
├── newtaskdialog.cpp/.h       # 新建任务对话框，输入验证还算完善
├── settingsmanager.cpp/.h     # 设置管理器，单例模式用得对
├── historymanager.cpp/.h      # 历史管理器，数据库操作还算规范
├── localserver.cpp/.h         # 本地服务器，用于浏览器集成(希望有好心人帮我写浏览器劫持(bushi)啊呸，集成)
├── systemtray.cpp/.h          # 系统托盘，图标加载逻辑感人
├── settingsdialog.cpp/.h       # 设置对话框，界面布局还行
└── logger.h                   # 日志系统，宏用得很溜
```

## 🎨 界面截图

> 抱歉，由于代码质量太低，我们不好意思放截图
> 
> 不过你可以自己编译运行看看，界面还算能看

## 🔧 编译说明

### 环境要求

- Qt 6.10.0 beta3 （我们用的是QT6，不像某某会议，虽然代码写得像Qt4时代）
- CMake 3.20+ （构建系统还算现代）
- MinGW 64-bit （Windows下的选择）
- C++17标准（虽然代码风格像C++98）

### 编译步骤

```bash
# 1. 创建构建目录（虽然build目录已经存在（我知道你们没有，但是你们先别急））
mkdir build

# 2. 配置项目（祈祷CMake能找到Qt）
```
（说实话我也不记得我怎么干的了，所以推荐：**下载QT，然后安装，然后打开QT Creator,然后打开项目（不保证QT能成功安装而且读取CmakeLists.txt）**）
```bash
# 3. 编译（如果出错，请默念"屎山代码"三遍）
cmake --build build

# 4. 运行（记得先备份重要文件）
./build/Downloader
```

## 🐛 已知问题

1. **注释覆盖率114514/100** - 虽然我们努力添加了中文注释，但不排除debug的时候缺德的AI写了英语注释（~~GPT说你呢快点改！~~）
2. **状态管理混乱** - 下载任务的状态转换有点随意

## 🚀 功能特性

### ✅ 能正常工作的功能

- **多线程下载**：支持1-114514个线程（建议别超过32个）
- **断点续传**：通过HTTP Range请求实现
- **浏览器集成**：通过本地服务器接收下载请求
- **主题切换**：支持深色/浅色主题
- **系统托盘**：最小化到系统托盘（流氓软件必备）
- **下载历史**：SQLite数据库存储历史记录（好了骗你的用不了）

### ⚠️ 偶尔（？）出问题的功能

- **图标加载**：有时候找不到图标文件
- **路径验证**：保存路径验证逻辑不够严谨
- **网络错误处理**：网络异常时的处理不够优雅
- **内存管理**：有些地方用了deleteLater，有些地方直接delete
-- **多语言支持**：只支持中文和英语而且有俩键翻译不了

## 📝 代码质量分析

### 📊 各项指标

| 指标 | 得分 | 评价 |
|------|------|------|
| 注释覆盖率 | 114514/100 | 手：活爹（充斥着凑数的注释） |
| 状态管理 | 89.0/100 | 状态转换有点随意 |
| 错误处理 | 25.0/100 | try-catch用得少（不是我真的用了这玩意吗） |
| 代码结构 | 70/100 | 嵌套有点深，不过问题不大，感谢F12的辛勤付出 |
| 代码重复度 | 65.0/100 | 有些逻辑重复了（问题不大） |
| 循环复杂度 | 40.49/100 | 这个还算~~可以~~不大行 |

### 🏆 自我肯定

> 评语：代码质量虽然不怎么样，但功能基本能用，属于那种"能用就别动"的类型。

## 🤝 贡献指南

如果你想改善这个"屎山项目"，欢迎提交PR！不过请注意：

1. **保证注释看得懂**：继续用中文注释（不要学习某名PT-5姓G的大模型）
2. **不要追求完美**：屎山代码也有存在的价值
3. **功能优先**：能跑就行，别过度重构（~~不然我看不懂是不可能过PR的~~）
4. **注释要详细**：毕竟我们的注释覆盖率还不够

## 📝 许可证

> 由于代码质量太低，我们不好意思指定许可证
> 
> 如果你非要使用，请自行承担风险
>
> 算了算了，QT的GPL协议……反正不是我想用，绝对不是！是QT逼我的QWQ

## 🙏 致谢

感谢Qt框架提供的强大功能，虽然我用得不太好...

感谢CMake构建系统，让我的项目还能编译...

感谢MinGW编译器，让我能编译出Windows下的可执行文件...

感谢我那该死的幽默感（~~我是不是太自恋了~~），让我能写出这么长的README...

感谢GitHub，让你们能有幸看到这坨屎...

感谢VSCode，让我不需要用记事本写代码...

感谢clangd插件，让我不用奔波于各种IDE之间...

感谢清华，让我能下载到这么快的镜像...

感谢中国电信，让我连上了网

感谢华为，让我有了这台电脑

感谢Windows，让我不用手搓操作系统

感谢英特尔，让我不需要自己造CPU

感谢三星，让我不用自己造磁盘

感谢我自己，让我能写出这么坨屎...

感谢所有将要吐槽这个项目的开发者们，你们的批评是我们~~进步~~的动力！

（~~算了啥都感谢一遍~~）

---

> **最后声明**：本项目纯属娱乐，代码质量虽然不高，但学习价值还是有的。毕竟，看别人的屎山也是提升编程能力的一种方式！（但是我不建议你看，因为我写的代码质量不高，但是你要是能看懂，你就是这个👍）

**记住：能用就行，别要求太高！** 
